@model Core.Data.ThemeWidget
@inject Core.Services.IDataService _db
@{
    var existing = _db.HtmlWidgets.Single(w => w.Name == Model.Widget.Title && w.Theme == Model.Theme && w.Author == "0");
    var content = existing == null ? "" : existing.Content;
}
<form id="usrform" method="post" action="~/widgets/api/htmlblock/edit">
    <div class="form-group">
        <input type="hidden" id="txtWidget" name="txtWidget" value="@Model.Widget.Title" />
        <input type="hidden" id="txtTheme" name="txtTheme" value="@Model.Theme" />
        <textarea rows="4" id="txtHtml" name="txtHtml" class="form-control">@content</textarea>
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-primary btn-main">Save</button>
    </div>
</form>